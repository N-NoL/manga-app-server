(this.webpackJsonpmanga=this.webpackJsonpmanga||[]).push([[21],{195:function(e,t,a){"use strict";t.a={status:[{id:1,value:0,name:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u0442\u0441\u044f"},{id:2,value:0,name:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d"},{id:3,value:0,name:"\u0417\u0430\u043c\u043e\u0440\u043e\u0436\u0435\u043d"}],type:[{id:1,value:0,name:"\u041c\u0430\u043d\u0433\u0430"},{id:2,value:0,name:"OEL-\u043c\u0430\u043d\u0433\u0430"},{id:3,value:0,name:"\u041c\u0430\u043d\u0445\u0432\u0430"},{id:4,value:0,name:"\u041c\u0430\u043d\u044c\u0445\u0443\u0430"},{id:5,value:0,name:"\u0420\u0443\u043c\u0430\u043d\u0433\u0430"},{id:6,value:0,name:"\u041a\u043e\u043c\u0438\u043a\u0441 \u0437\u0430\u043f\u0430\u0434\u043d\u044b\u0439"}],format:[{id:1,value:0,name:"4-\u043a\u043e\u043c\u0430 (\u0401\u043d\u043a\u043e\u043c\u0430)"},{id:2,value:0,name:"\u0421\u0431\u043e\u0440\u043d\u0438\u043a"},{id:3,value:0,name:"\u0414\u043e\u0434\u0437\u0438\u043d\u0441\u0438"},{id:4,value:0,name:"\u0412 \u0446\u0432\u0435\u0442\u0435"},{id:5,value:0,name:"\u0421\u0438\u043d\u0433\u043b"},{id:6,value:0,name:"\u0412\u0435\u0431"}],genre:[{id:1,value:0,name:"\u0431\u043e\u0435\u0432\u0438\u043a"},{id:2,value:0,name:"\u0431\u043e\u0435\u0432\u044b\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0430"},{id:4,value:0,name:"\u0432\u0430\u043c\u043f\u0438\u0440\u044b"},{id:3,value:0,name:"\u0430\u0440\u0442"},{id:5,value:0,name:"\u0433\u0430\u0440\u0435\u043c"},{id:6,value:0,name:"\u0433\u0435\u043d\u0434\u0435\u0440\u043d\u0430\u044f \u0438\u043d\u0442\u0440\u0438\u0433\u0430"},{id:7,value:0,name:"\u0433\u0435\u0440\u043e\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0444\u044d\u043d\u0442\u0435\u0437\u0438"},{id:8,value:0,name:"\u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0432"},{id:9,value:0,name:"\u0434\u0437\u0451\u0441\u044d\u0439"},{id:10,value:0,name:"\u0434\u0440\u0430\u043c\u0430"},{id:11,value:0,name:"\u0438\u0433\u0440\u0430"},{id:12,value:0,name:"\u0438\u0441\u0435\u043a\u0430\u0439"},{id:13,value:0,name:"\u0438\u0441\u0442\u043e\u0440\u0438\u044f"},{id:14,value:0,name:"\u043a\u0438\u0431\u0435\u0440\u043f\u0430\u043d\u043a"},{id:15,value:0,name:"\u043a\u043e\u0434\u043e\u043c\u043e"},{id:16,value:0,name:"\u043a\u043e\u043c\u0435\u0434\u0438\u044f"},{id:17,value:0,name:"\u043c\u0430\u0445\u043e-\u0441\u0451\u0434\u0437\u0451"},{id:18,value:0,name:"\u043c\u0435\u0445\u0430"},{id:19,value:0,name:"\u043c\u0438\u0441\u0442\u0438\u043a\u0430"},{id:20,value:0,name:"\u043d\u0430\u0443\u0447\u043d\u0430\u044f \u0444\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430"},{id:21,value:0,name:"\u043e\u043c\u0435\u0433\u0430\u0432\u0435\u0440\u0441"},{id:22,value:0,name:"\u043f\u043e\u0432\u0441\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0441\u0442\u044c"},{id:23,value:0,name:"\u043f\u043e\u0441\u0442\u0430\u043f\u043e\u043a\u0430\u043b\u0438\u043f\u0442\u0438\u043a\u0430"},{id:24,value:0,name:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f"},{id:25,value:0,name:"\u043f\u0441\u0438\u0445\u043e\u043b\u043e\u0433\u0438\u044f"},{id:26,value:0,name:"\u0440\u043e\u043c\u0430\u043d\u0442\u0438\u043a\u0430"},{id:27,value:0,name:"\u0441\u0430\u043c\u0443\u0440\u0430\u0439\u0441\u043a\u0438\u0439 \u0431\u043e\u0435\u0432\u0438\u043a"},{id:28,value:0,name:"\u0441\u0432\u0435\u0440\u0445\u044a\u0435\u0441\u0442\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435"},{id:29,value:0,name:"\u0441\u0451\u0434\u0437\u0451"},{id:30,value:0,name:"\u0441\u0451\u0434\u0437\u0451-\u0430\u0439"},{id:31,value:0,name:"\u0441\u0451\u043d\u044d\u043d"},{id:32,value:0,name:"\u0441\u0451\u043d\u044d\u043d-\u0430\u0439"},{id:33,value:0,name:"\u0441\u043f\u043e\u0440\u0442"},{id:34,value:0,name:"\u0441\u044d\u0439\u043d\u044d\u043d"},{id:35,value:0,name:"\u0442\u0440\u0430\u0433\u0435\u0434\u0438\u044f"},{id:36,value:0,name:"\u0442\u0440\u0438\u043b\u043b\u0435\u0440"},{id:37,value:0,name:"\u0443\u0436\u0430\u0441\u044b"},{id:38,value:0,name:"\u0444\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430"},{id:39,value:0,name:"\u0444\u044d\u043d\u0442\u0435\u0437\u0438"},{id:40,value:0,name:"\u0448\u043a\u043e\u043b\u0430"},{id:41,value:0,name:"\u044d\u0440\u043e\u0442\u0438\u043a\u0430"},{id:42,value:0,name:"\u044d\u0442\u0442\u0438"},{id:43,value:0,name:"\u044e\u0440\u0438"},{id:44,value:0,name:"\u044f\u043e\u0439"}]}},196:function(e,t,a){"use strict";t.a=[{value:"rating",name:"\u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0443"},{value:"name",name:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e (A-Z)"},{value:"views",name:"\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430\u043c"},{value:"date",name:"\u0434\u0430\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"},{value:"chapter",name:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0433\u043b\u0430\u0432"}]},310:function(e,t,a){},358:function(e,t){},361:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a(180),c=a(1),s=a.n(c),i=a(57),o=a(230),u=a(550),l=a(62),p=(a(310),a(58)),h=a(101),d=a(194),m=a(87),f=a(195),v=function(){function e(t){var a=this;Object(h.a)(this,e),this.filter=f.a,this.keys=Object.keys(f.a),this.cnt=0,this.changeFilter=function(e,t,n,r){return a.filter[e][t].value=a.filter[e][t].value===n?0:a.filter[e][t].value+1,0===a.filter[e][t].value&&a.cnt--,1===a.filter[e][t].value&&a.cnt++,a.rootStore[r].fetchMangaChank(a.option)},this.clearAll=function(e){return a.filter=f.a,a.cnt=0,a.rootStore[e].fetchMangaChank({})},this.rootStore=t}return Object(d.a)(e,[{key:"option",get:function(){var e=this,t=this.keys.map((function(t){return e.filter[t].filter((function(e){return 0!=e.value}))})),a={};return t.map((function(t,n){"genre"==e.keys[n]?(a.includeGenre=t.filter((function(e){return 1===e.value})).map((function(e){return e.id})),a.excludeGenre=t.filter((function(e){return 2===e.value})).map((function(e){return e.id}))):a[e.keys[n]]=t.map((function(e){return e.id}))})),a}}]),e}(),g=v=Object(m.k)(v,{filter:m.p,cnt:m.p,clearAll:m.f,changeFilter:m.f}),b=a(60),k=a.n(b),j=a(86),O=a(70),x=a(61),w=a(63),y=a.n(w),S=a(196),L=function(){function e(t,a){var n=this;Object(h.a)(this,e),this.clear=function(){n.page=1,n.total=0,n.list=[]},this.fetchMangaChank=Object(x.a)(k.a.mark((function e(){var t,a,r,c,s=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=!(s.length>0&&void 0!==s[0])||s[0])||n.hasMore&&!n.isLoading){e.next=3;break}return e.abrupt("return");case 3:return t&&(n.list=[]),n.isLoading=!0,a=n.rootStore.MangaFilterStore.option,e.prev=6,r=Object(O.a)(Object(O.a)({sort:n.sortBy,dir:"DESC"},a),{},{skip:t?0:24*(n.page-1),take:24}),e.next=10,y.a.get("".concat("https://manga-in.space/server-api","/").concat(n.apiEndpoint),{params:r});case 10:c=e.sent,Object(m.q)((function(){n.list=t?c.data.list:[].concat(Object(j.a)(n.list),Object(j.a)(c.data.list)),n.total=c.data.total,n.page=t?2:n.page+1,n.isLoading=!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),Object(m.q)((function(){n.isLoading=!1})),console.log("Axios request failed: ".concat(e.t0));case 18:case"end":return e.stop()}}),e,null,[[6,14]])}))),this.nextMangaChank=function(){return n.fetchMangaChank(!1)},this.rootStore=t,this.apiEndpoint=a,this.sortBy=S.a[0].value,this.page=1,this.total=0,this.list=[],this.isLoading=!1}return Object(d.a)(e,[{key:"setSortBy",value:function(e){this.sortBy=e,this.fetchMangaChank()}},{key:"cnt",get:function(){return this.list.length}},{key:"hasMore",get:function(){return this.cnt!==this.total}}]),e}(),I=L=Object(m.k)(L,{list:m.p,clear:m.f}),q=function e(t){var a=this;Object(h.a)(this,e),this.isLoading=!0,this.chapter={id:null},this.fetchChapter=function(){var e=Object(x.a)(k.a.mark((function e(t){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.isLoading=!0,e.prev=1,n="-"!==localStorage.autoBookmark?{}:{headers:{Authorization:""}},e.next=5,y.a.get("".concat("https://manga-in.space/server-api","/chapter/").concat(t),n);case 5:return r=e.sent,e.abrupt("return",Object(m.q)((function(){a.chapter=r.data,a.isLoading=!1})));case 9:e.prev=9,e.t0=e.catch(1),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),this.rootStore=t},E=q=Object(m.k)(q,{isLoading:m.p,chapter:m.p}),M=function e(t){var a=this;Object(h.a)(this,e),this.manga={id:null},this.isLoading=!0,this.fetchManga=function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.isLoading=!0,e.prev=1,e.next=4,y.a.get("".concat("https://manga-in.space/server-api","/manga/").concat(t));case 4:return n=e.sent,e.abrupt("return",Object(m.q)((function(){a.manga=n.data,a.isLoading=!1})));case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.setRating=function(){var e=Object(x.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("".concat("https://manga-in.space/server-api","/manga/rating"),{id:t,value:n});case 3:return r=e.sent,e.abrupt("return",Object(m.q)((function(){a.manga=Object(O.a)(Object(O.a)({},a.manga),r.data)})));case 7:e.prev=7,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),this.subscribe=function(){var e=Object(x.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("".concat("https://manga-in.space/server-api","/manga/subscribe"),{mangaId:t});case 3:return e.sent,e.abrupt("return",Object(m.q)((function(){a.manga.subscribe=!0})));case 7:e.prev=7,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.unsubscribe=function(){var e=Object(x.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("".concat("https://manga-in.space/server-api","/manga/unsubscribe"),{mangaId:t});case 3:return e.sent,e.abrupt("return",Object(m.q)((function(){a.manga.subscribe=!1})));case 7:e.prev=7,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.setBookmark=function(){var e=Object(x.a)(k.a.mark((function e(t){var n,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mangaId,r=t.chapterId,e.prev=1,e.next=4,y.a.post("".concat("https://manga-in.space/server-api","/manga/bookmark"),{mangaId:n,chapterId:r});case 4:return c=e.sent,e.abrupt("return",Object(m.q)((function(){a.manga.bookmark=c.data})));case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteBookmark=function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mangaId,e.prev=1,e.next=4,y.a.delete("".concat("https://manga-in.space/server-api","/manga/bookmark"),{data:{mangaId:n}});case 4:return e.sent,e.abrupt("return",Object(m.q)((function(){delete a.manga.bookmark})));case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.rootStore=t},C=M=Object(m.k)(M,{isLoading:m.p,manga:m.p}),A=a(328),P=a.n(A),_=function e(t){var a=this;Object(h.a)(this,e),this.access_token=window.localStorage.getItem("token"),this.current_user=null,this.fetchProfile=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://manga-in.space/server-api","/auth/profile"));case 2:return t=e.sent,e.abrupt("return",Object(m.q)((function(){a.current_user=t.data})));case 4:case"end":return e.stop()}}),e)}))),this.tokenCheker=Object(m.g)((function(){a.access_token?(localStorage.setItem("token",a.access_token),y.a.defaults.headers.common={Authorization:"Bearer ".concat(a.access_token)},window.socket||(window.socket=P()("https://manga-in.space",{query:"jwtToken=".concat(a.access_token)}),window.socket.on("message",(function(e){a.rootStore.ChatStore.eventMassage(e)}))),null==a.current_user&&a.fetchProfile()):(window.socket.disconnect(),localStorage.removeItem("token"),a.current_user=null)})),this.login=function(){var e=Object(x.a)(k.a.mark((function e(t){var n,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.next=3,y.a.post("".concat("https://manga-in.space/server-api","/auth/login"),{username:n,password:r});case 3:return c=e.sent,e.abrupt("return",Object(m.q)((function(){localStorage.removeItem("token"),a.access_token=c.data.access_token,a.current_user=c.data.user})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.registration=function(){var e=Object(x.a)(k.a.mark((function e(t){var n,r,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.email,c=t.password,e.next=3,y.a.post("".concat("https://manga-in.space/server-api","/auth/registration"),{username:n,email:r,password:c});case 3:return s=e.sent,e.abrupt("return",Object(m.q)((function(){localStorage.removeItem("token"),a.access_token=s.data.access_token,a.current_user=s.data.user})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){localStorage.removeItem("token"),a.access_token="",a.current_user=null},this.rootStore=t},z=_=Object(m.k)(_,{current_user:m.p,access_token:m.p}),U=a(123),B=function e(t){var a=this;Object(h.a)(this,e),this.isLoading=!0,this.user={id:null,followers:[]},this.fetchUser=function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.isLoading=!0,e.prev=1,e.next=4,y.a.get("".concat("https://manga-in.space/server-api","/user/").concat(t));case 4:return n=e.sent,e.abrupt("return",Object(m.q)((function(){a.user=n.data,a.isLoading=!1})));case 8:e.prev=8,e.t0=e.catch(1),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.addFriend=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("".concat("https://manga-in.space/server-api","/friend"),{reseiverId:a.user.id});case 3:if(!(t=e.sent).data.id){e.next=6;break}return e.abrupt("return",Object(m.q)((function(){a.user.followers[0]=t.data})));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),this.deleteFriend=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.delete("".concat("https://manga-in.space/server-api","/friend"),{data:{reseiverId:a.user.id}});case 3:if(200!==e.sent.status){e.next=6;break}return e.abrupt("return",Object(m.q)((function(){a.user.followers=[]})));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),this.setImg=function(){var e=Object(x.a)(k.a.mark((function e(t,n){var r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("file",t),e.prev=2,e.next=5,y.a.post("".concat("https://manga-in.space/server-api","/upload/").concat(n,"Img"),r);case 5:return c=e.sent,e.abrupt("return",Object(m.q)((function(){a.user=Object(O.a)(Object(O.a)({},a.user),{},Object(U.a)({},"".concat("avatar"===n?"img":n,"Url"),c.data.url))})));case 9:e.prev=9,e.t0=e.catch(2),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),this.rootStore=t},D=B=Object(m.k)(B,{user:m.p,isLoading:m.p}),F=function e(t){var a=this;Object(h.a)(this,e),this.tree=[],this.adjacencyList={0:[]},this.isLoading=!0,this.fetch=function(){var e=Object(x.a)(k.a.mark((function e(t){var n,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat("https://manga-in.space/server-api","/comments/").concat(t));case 3:return n=e.sent,r=n.data,c={0:[]},r.map((function(e){var t=0;return e.rootPath.length>0&&(t=e.rootPath[e.rootPath.length-1],c[t]||(c[t]=[])),c[t].push(e)})),e.abrupt("return",Object(m.q)((function(){a.adjacencyList=c,a.isLoading=!1})));case 10:e.prev=10,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.setComment=function(){var e=Object(x.a)(k.a.mark((function e(t){var n,r,c,s,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mangaId,r=t.comment,c=t.rootId,e.prev=1,e.next=4,y.a.post("".concat("https://manga-in.space/server-api","/comments"),{mangaId:n,rootId:c,comment:r});case 4:return s=e.sent,i=Object(O.a)(Object(O.a)({},a.rootStore.AuthStore.current_user),s.data),e.abrupt("return",Object(m.q)((function(){a.adjacencyList[c||0]=a.adjacencyList[c||0]?[].concat(Object(j.a)(a.adjacencyList[c||0]),[i]):[i]})));case 9:e.prev=9,e.t0=e.catch(1),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),this.setVote=function(){var e=Object(x.a)(k.a.mark((function e(t){var a,n,r,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commentId,n=t.value,r=t.comment,c=r.value,r.usersRated[0]&&(c-=r.usersRated[0].value),c+=n,e.prev=4,e.next=7,y.a.post("".concat("https://manga-in.space/server-api","/comments/vote"),{commentId:a,value:n});case 7:return s=e.sent,e.abrupt("return",Object(m.q)((function(){r.usersRated=[s.data],r.value=c})));case 11:e.prev=11,e.t0=e.catch(4),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),this.rootStore=t},R=F=Object(m.k)(F,{adjacencyList:m.p,isLoading:m.p}),N=function e(t){var a=this;Object(h.a)(this,e),this.dialogs=[],this.dialogsIsLoading=!0,this.dialogIsLoading=!1,this.selectedDialog=null,this.messages=[],this.userById={},this.socket=null,this.setDialog=function(e){a.selectedDialog=e,a.fetchMessages(e)},this.fetchDialogs=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("".concat("https://manga-in.space/server-api","/chat"));case 3:return t=e.sent,e.abrupt("return",Object(m.q)((function(){a.dialogs=t.data.map((function(e){var t=e.users.find((function(e){return e.id!==a.authStore.current_user.id}));return Object(O.a)(Object(O.a)({},e),{},{user:t||a.authStore.current_user})})),a.dialogsIsLoading=!1})));case 7:e.prev=7,e.t0=e.catch(0),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.fetchMessages=function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dialogIsLoading=!0,a.messages=[],e.prev=2,e.next=5,y.a.get("".concat("https://manga-in.space/server-api","/chat/").concat(t));case 5:return n=e.sent,e.abrupt("return",Object(m.q)((function(){var e={};n.data.users.map((function(t){e[t.id]=t})),a.messages=n.data.messages.map((function(t){return t.user=e[t.userId],t})),a.userById=Object(O.a)(Object(O.a)({},a.userById),e),a.dialogIsLoading=!1})));case 9:e.prev=9,e.t0=e.catch(2),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.eventMassage=function(e){a.dialogs=a.dialogs.map((function(t){return t.id===e.chatId?Object(O.a)(Object(O.a)({},t),{},{text:e.text,updateAt:e.createAt}):t})),a.selectedDialog===e.chatId&&(e.user=a.userById[e.userId]),a.messages=[].concat(Object(j.a)(a.messages),[e])},this.sendMassage=function(){var e=Object(x.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.text.length&&window.socket.emit("message",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.rootStore=t,this.authStore=t.AuthStore},T=N=Object(m.k)(N,{dialogIsLoading:m.p,dialogsIsLoading:m.p,dialogs:m.p,selectedDialog:m.p,messages:m.p,setDialog:m.f,isLoading:m.p,chapter:m.p,eventMassage:m.f}),G=function e(t){var a=this;Object(h.a)(this,e),this.popularUpdates={list:[],isLoading:!0,fetch:function(){return a._fetch("popularUpdates","?sort=date&take=6")}},this.updates={list:[],isLoading:!0,fetch:function(){return a._fetch("updates","/updates?sort=date")}},this.created={list:[],isLoading:!0,fetch:function(){return a._fetch("created","?sort=create&take=7")}},this.news={text:"",isLoading:!0,fetch:function(){var e=Object(x.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("https://manga-in.space/server-api","/news"));case 2:return t=e.sent,e.abrupt("return",Object(m.q)((function(){a.news.text=t.data.text,a.news.isLoading=!1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},this._fetch=function(){var e=Object(x.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a[t].isLoading=!0,a[t].list=[],e.prev=2,e.next=5,y.a.get("".concat("https://manga-in.space/server-api","/manga").concat(n));case 5:return r=e.sent,e.abrupt("return",Object(m.q)((function(){a[t].list=r.data.list,a[t].isLoading=!1})));case 9:e.prev=9,e.t0=e.catch(2),console.log("\ud83d\ude31 Axios request failed: ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),this.rootStore=t},J=G=Object(m.k)(G,{news:m.p,updates:m.p,created:m.p,popularUpdates:m.p}),W=function(){function e(){Object(h.a)(this,e),this.UserStore=new D(this),this.AuthStore=new z(this),this.MangaStore=new C(this),this.ChapterStore=new E(this),this.CommentStore=new R(this),this.MangaFilterStore=new g(this),this.MangaListStore=new I(this,"manga"),this.MangaListUpdatesStore=new I(this,"manga/updates"),this.ChatStore=new T(this),this.MainPageStore=new J(this),this.theme=localStorage.dark?"dark":"light"}return Object(d.a)(e,[{key:"changeTheme",value:function(e){this.theme=e?"dark":"light"}}]),e}(),V=W=Object(m.k)(W,{theme:m.p,changeTheme:m.f}),Z=a(551);a(361),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(25),H=a(37),K=s.a.lazy((function(){return Promise.all([a.e(0),a.e(30)]).then(a.bind(null,552))})),Q=s.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(5),a.e(23)]).then(a.bind(null,554))})),X=s.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(5),a.e(31)]).then(a.bind(null,179))}));function Y(e){var t=e.Component,a=Object(r.a)(e,["Component"]);return s.a.createElement("div",null,s.a.createElement(c.Suspense,{fallback:s.a.createElement("div",{style:{position:"absolute",top:"calc(50vh - 20px)",left:"calc(50vw - 20px)"}},s.a.createElement(H.a,{color:"secondary"}))},s.a.createElement(t,a)))}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}));var ee={dark:"0, 0, 0, 0.12",light:"218,224,235,.6"},te=function(e){return{palette:{type:e,primary:{main:"#8bc34a"},secondary:{main:"#8bc34a"}},overrides:{MuiPaper:{boxShadow:"0 3px 12px 0 rgba(".concat(ee[e],")"),elevation1:{boxShadow:"0 3px 12px 0 rgba(".concat(ee[e],")")},elevation2:{boxShadow:"0 5px 26px 0 rgba(".concat(ee[e],")")},elevation3:{boxShadow:"0 8px 20px 0 rgba(".concat(ee[e],")")}}}}},ae=new V;t.default=Object(p.c)((function(){var e=Object(c.useState)(te(ae.theme)),t=Object(n.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){r(te(ae.theme))}),[ae.theme]),s.a.createElement(p.a,{rootStore:ae,authStore:ae.AuthStore,mangaListUpdatesStore:ae.MangaListUpdatesStore,userStore:ae.UserStore,mangaStore:ae.MangaStore,chapterStore:ae.ChapterStore,mangaFilterStore:ae.MangaFilterStore,mangaListStore:ae.MangaListStore,mainPageStore:ae.MainPageStore,commentStore:ae.CommentStore,chatStore:ae.ChatStore},s.a.createElement(u.a,{theme:Object($.a)(a)},s.a.createElement(Z.a,null),s.a.createElement(i.a,null,s.a.createElement(o.d,null,s.a.createElement(o.b,{exact:!0,path:l.a.filter((function(e){return"/admin"!==e.path})).map((function(e){return e.path})),render:function(e){return s.a.createElement(Y,Object.assign({Component:X},e))}})),s.a.createElement(o.d,null,s.a.createElement(o.b,{path:l.b.User.path,render:function(e){return s.a.createElement(Y,Object.assign({Component:Q},e))}})),s.a.createElement(o.d,null,s.a.createElement(o.b,{path:l.b.ReadManga.path,render:function(e){return s.a.createElement(Y,Object.assign({Component:l.b.ReadManga.component},e))},exact:l.b.ReadManga.exact}),l.a.map((function(e){return s.a.createElement(o.b,Object.assign({key:e.path},e))})),s.a.createElement(o.b,{exact:!0,path:"**",render:function(e){return s.a.createElement(Y,Object.assign({Component:K,status:404},e))}})))))}))},62:function(e,t,a){"use strict";a.d(t,"a",(function(){return L})),a.d(t,"b",(function(){return I})),a.d(t,"c",(function(){return q}));var n=a(70),r=a(86),c=a(180),s=a(37),i=a(1),o=a.n(i),u=a(549);function l(e){var t=e.Component,a=Object(c.a)(e,["Component"]);return o.a.createElement("div",null,o.a.createElement(i.Suspense,{fallback:o.a.createElement("div",{style:{position:"absolute",top:"calc(50vh - 20px)",left:"calc(50vw - 20px)"}},o.a.createElement(s.a,{color:"secondary"}))},o.a.createElement(t,a)))}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?function(t){return o.a.createElement(u.a,{fixed:!0},o.a.createElement(l,Object.assign({},t,{Component:e})))}:function(t){return o.a.createElement(l,Object.assign({},t,{Component:e}))}}function h(e){var t=e.Component,a=Object(c.a)(e,["Component"]);return o.a.createElement("div",null,o.a.createElement(i.Suspense,{fallback:o.a.createElement("div",{style:{paddingLeft:"calc(50% - 10px)",paddingTop:40}},o.a.createElement(s.a,{color:"secondary"}))},o.a.createElement(t,a)))}function d(e){return function(t){return o.a.createElement(h,Object.assign({},t,{Component:e}))}}var m=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(17),a.e(28)]).then(a.bind(null,530))}))),f=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(5),a.e(24)]).then(a.bind(null,374))}))),v=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(12)]).then(a.bind(null,525))})),!1),g=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(16)]).then(a.bind(null,385))}))),b=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(6),a.e(26)]).then(a.bind(null,529))}))),k=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(14)]).then(a.bind(null,387))}))),j=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(13)]).then(a.bind(null,524))}))),O=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(15)]).then(a.bind(null,528))}))),x=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(18)]).then(a.bind(null,388))}))),w=p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(19)]).then(a.bind(null,389))}))),y={ReadManga:{path:"/manga/serie-:mangaId/chapter-:chapterId",link:function(e,t){return"/manga/serie-".concat(e,"/chapter-").concat(t)},component:b,exact:!0}},S={Main:{ruName:"\u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043e\u0435",path:"/",component:m,exact:!0},MangaList:{ruName:"\u043a\u0430\u0442\u0430\u043b\u043e\u0433",path:"/manga",component:g,exact:!0},MangaUpdate:{ruName:"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",path:"/updates",component:k,exact:!0},Chat:{ruName:"\u0434\u0438\u0430\u043b\u043e\u0433\u0438",path:"/chat",component:p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(6),a.e(9)]).then(a.bind(null,521))}))),exact:!0},Manga:{path:"/manga/serie-:mangaId",link:function(e){return"/manga/serie-".concat(e)},component:v,exact:!0},User:{path:["/user/profile-:userId"],link:function(e){return"/user/profile-".concat(e)},component:f,exact:!0,tabList:[{label:"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u0432\u0448\u0438\u0435\u0441\u044f",subLink:"",component:d(o.a.lazy((function(){return a.e(25).then(a.bind(null,148))})))},{label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",subLink:"history",component:d(o.a.lazy((function(){return Promise.all([a.e(0),a.e(22)]).then(a.bind(null,518))})))},{label:"\u0414\u0440\u0443\u0437\u044c\u044f",subLink:"friends",component:d(o.a.lazy((function(){return Promise.all([a.e(0),a.e(20),a.e(29)]).then(a.bind(null,519))})))}]},CreateManga:{ruName:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u043c\u0430\u043d\u0433\u0438",path:"/create-manga",component:j,exact:!0},CreateChapter:{path:"/manga/serie-:mangaId/create-chapter",link:function(e){return"/manga/serie-".concat(e,"/create-chapter")},component:O,exact:!0},SignIn:{path:"/login",component:x,exact:!0},SignUp:{path:"/registration",component:w,exact:!0},EditProfilePage:{path:"/user/edit-profile",component:p(o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(27)]).then(a.bind(null,522))}))),exact:!0}};S.User.tabList.map((function(e){e.path=S.User.path+"/"+e.subLink})),S.User.path=[S.User.path].concat(Object(r.a)(S.User.tabList.map((function(e){return e.path}))));var L=Object.values(S),I=Object(n.a)(Object(n.a)({},S),y),q=Object.values(I).filter((function(e){return e.ruName}))}}]);
//# sourceMappingURL=21.31961ec5.chunk.js.map